pipeline:
  agent:
    any:

  stages:
    - stage: "Checkout Code"
      steps:
        - step:
            checkout: scm

    - stage: "Build Docker Image"
      steps:
        - sh: docker build -t flask-todo .

    - stage: "Run Flask Container"
      steps:
        - sh: docker stop flask-todo || true
        - sh: docker rm flask-todo || true
        - sh: docker run -d -p 5000:5000 --name flask-todo flask-todo

    - stage: "Complete"
      steps:
        - sh: echo "âœ… Flask ToDo app deployed successfully!"
